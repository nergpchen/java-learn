堆Heap

Java 虚拟机所管理的内存中最大的一块，Java 堆是所有线程共享的一块内存区域，在虚拟机启动时创建。**此内存区域的唯一目的就是存放对象实例，几乎所有的对象实例以及数组都在这里分配内存。**

![](/assets/jvm2.png)

堆分类:

新生代：存放新生成的对象，新生代通常**存活时间较短**，因此基于**复制算法**来进行回收，所谓**复制算法就是扫描出存活的对象，并复制到一块新的完全未使用的空间中.**

老生代：存放结果多次垃圾回收还存在的对象,对象存活的时间比较长，比较稳定，因此采用**标记（Mark）算法**来进行回收，所谓标记就是扫描出存活的对象，然后再进行回收未被标记的对象，回收后对用空出的空间要么进行**合并**，要么**标记出来便于下次进行分配**

，总之就是要减少内存碎片带来的效率损耗

堆的内存模型大致为：

![](/assets/gc.png)

新生代分配1/3空间，老年代 2/3堆空间.新生代里的Eden占8/10,from,to各占1/10

